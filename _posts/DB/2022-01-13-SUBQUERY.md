---
layout: single
title: "Rookiss Part5 ë°ì´í„°ë² ì´ìŠ¤ : SUBQUERY"
categories: DB
tags: DB
author_profile: false
sidebar:
  nav: "docs"
---

## ğŸ™‡â€â™€ï¸SUBQUERY


### ğŸªSUBQUERY

**SubQuery (ì„œë¸Œì¿¼ë¦¬/í•˜ìœ„ì¿¼ë¦¬)**
- SQL ëª…ë ¹ë¬¸ ì•ˆì— ì§€ì •í•˜ëŠ” í•˜ë¶€ SELECT

- ì—°ë´‰ì´ ì—­ëŒ€ê¸‰ìœ¼ë¡œ ë†’ì€ ì„ ìˆ˜ì˜ ì •ë³´ë¥¼ ì¶”ì¶œ
```
SELECT TOP 1 *
FROM salaries
ORDER BY salary DESC
```

-- rodrial01
```
SELECT *
FROM players
WHERE playerID = 'rodrial01'
```

- ì´ê²ƒì„ í•œ ë²ˆì— í•˜ë ¤ë©´?
- ë‹¨ì¼í–‰ ì„œë¸Œì¿¼ë¦¬
```
SELECT *
FROM players
WHERE playerID = (SELECT TOP 1 playerID FROM salaries ORDER BY salary DESC)
```

- ë‹¤ì¤‘í–‰ IN ì‚¬ìš©
- playerID = ë‹¨ì¼ê°’
- IN : ()ì•ˆì— ë“¤ì–´ìˆëŠ” ê°’ì¤‘ì— ì•„ë¬´ê±°ë‚˜, ì¤‘ë³µí•´ì„œ ìˆìœ¼ë©´ í•˜ë‚˜ë§Œ ë‚˜ì˜´
```
SELECT *
FROM players
WHERE playerID IN (SELECT TOP 20 playerID FROM salaries ORDER BY salary DESC)
```

- ì„œë¸Œì¿¼ë¦¬ëŠ” WHEREì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ì§€ë§Œ, ë‚˜ë¨¸ì§€ êµ¬ë¬¸ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥
`SELECT (SELECT COUNT(*) FROM players) AS playerCount, (SELECT COUNT(*) FROM batting) AS battingCount;`

- INSERTì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥
```
SELECT *
FROM salaries
ORDER BY yearID DESC
```

- INSERT INTO
```
INSERT INTO salaries
VALUES (2022, 'KOR', 'NL', 'present', (SELECT MAX(salary) FROM salaries))
```

- INSERT SELECT
- í…Œì´ë¸”ë¼ë¦¬ ì´ë¯¸ ìˆëŠ” ë°ì´í„°ë¥¼ ë³µì‚¬í•  ë–„ ìœ ìš©
```
INSERT INTO salaries
SELECT 2022, 'KOR', 'NL', 'present2', (SELECT MAX(salary) FROM salaries)
```

```
INSERT INTO salaries_temp
SELECT yearID, playerID, salary FROM salaries
```

```
SELECT *
FROM salaries_temp
```

### ğŸªìƒê´€ê´€ê³„ ì„œë¸Œì¿¼ë¦¬

**ìƒê´€ ê´€ê³„ ì„œë¸Œì¿¼ë¦¬**

- EXISTS, NOT EXISTS
- ë‹¹ì¥ ììœ ìì¬ë¡œ ì‚¬ìš©ì€ ëª»í•´ë„ ë˜ë‹ˆê¹Œ -> ê¸°ì–µë§Œ í•˜ì!!


- í¬ìŠ¤íŠ¸ ì‹œì¦Œ íƒ€ê²©ì— ì°¸ì—¬í•œ ì„ ìˆ˜ë“¤ ëª©ë¡
```
SELECT *
FROM players
WHERE playerID IN (SELECT playerID FROM battingpost)
```

```
SELECT *
FROM players
WHERE EXISTS (SELECT playerID FROM battingpost WHERE battingpost.playerID = players.playerID)
```
- EXISTSë¥¼ ì‚¬ìš©í•˜ë©´ í™•ì¥ì„±ì´ ë„“ë‹¤ (WHEREì„ ì‚¬ìš©í•˜ê¸° ë–„ë¬¸ì—)



