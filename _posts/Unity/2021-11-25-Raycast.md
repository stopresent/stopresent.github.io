---
layout: single
title: "C# Rookiss Part3 ìœ ë‹ˆí‹° ì—”ì§„ : Raycast"
categories: Unity
tags: Unity
author_profile: false
sidebar:
  nav: "docs"
---

## ğŸ™‡â€â™€ï¸Raycast

ë ˆì´ì¼€ìŠ¤íŒ…ì€ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì²˜ìŒìœ¼ë¡œ ë§ì€ ë¬¼ì²´ë§Œ ì¸ì‹


### ğŸªRaycast


```cs
Debug.DrawRay(transform.position, Vector3.forward * 10, Color.red);

RaycastHit hit;
if (Physics.Raycast(transform.position, Vector3.forward, out hit, 10))
    Debug.Log($"Raycast hit!{hit.collider.gameObject.name}");
```

* ì›”ë“œì¢Œí‘œì—ì„œ ë‚˜ê°€ë¯€ë¡œ Zì¶• ë°©í–¥ìœ¼ë¡œë§Œ ë‚˜ê°

```cs
Vector3 look = transform.TransformDirection(Vector3.forward);

Debug.DrawRay(transform.position, look * 10, Color.red);

RaycastHit hit;
if (Physics.Raycast(transform.position, look, out hit, 10))
    Debug.Log($"Raycast hit!{hit.collider.gameObject.name}");
```

* ë¡œì»¬ ì¢Œí‘œë¡œ ë°”ê¿ˆ
* `Vector3 look = transform.TransformDirection(Vector3.forward);` - ì‚¬ìš©


```cs
Vector3 look = transform.TransformDirection(Vector3.forward);
Debug.DrawRay(transform.position + Vector3.up, look * 10, Color.red);

RaycastHit[] hits;

hits = (Physics.RaycastAll(transform.position + Vector3.up, look, 10));

foreach (RaycastHit hit in hits)
{
    Debug.Log($"RacastHit! {hit.transform.gameObject.name}");
}
```

* ë ˆì´ì— ë§ëŠ” ëª¨ë“  ì˜¤ë¸Œì íŠ¸ë¥¼ ì•Œê³ ì‹¶ì„ ë•Œ
* RaycastAll ì‚¬ìš©


### ğŸªmousePosition

Local <-> World <-> (Viewport <-> Screen) (í™”ë©´)

`Debug.Log(Input.mousePosition); // Screen`
* í™”ë©´ì— í”½ì…€ë‹¨ìœ„ë¡œ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤Œ


`Debug.Log(Camera.main.ScreenToViewportPoint(Input.mousePosition)); // Viewport`
* í™”ë©´ ë¹„ìœ¨ë¡œ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤Œ
* ìµœëŒ€ (1, 1, 0)


**Click!**

```cs
if (Input.GetMouseButtonDown(0))
{
    Vector3 mousePos = Camera.main.ScreenToWorldPoint(new Vector3(Input.mousePosition.x, Input.mousePosition.y, Camera.main.nearClipPlane)); // ë§ˆìš°ìŠ¤ì˜ ìŠ¤í¬ë¦°ì¢Œí‘œ
    Vector3 dir = mousePos - Camera.main.transform.position; // ì¹´ë©”ë¼ì™€ ë§ˆìš°ìŠ¤ì¢Œí‘œì˜ ë°©í–¥ë²¡í„°
    dir = dir.normalized; // ë°©í–¥ë²¡í„°ì˜ í¬ê¸°ë¥¼ 1ë¡œ

    Debug.DrawRay(Camera.main.transform.position, dir * 100.0f, Color.red, 1.0f);

    RaycastHit hit;
    if (Physics.Raycast(Camera.main.transform.position, dir, out hit, 100.0f))
    {
        Debug.Log($"Raycast Camera @ {hit.transform.gameObject.name}");
    }
}
```

ë” ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œëŠ” Rayë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ!

```cs
if (Input.GetMouseButtonDown(0))
{
    Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);

    Debug.DrawRay(Camera.main.transform.position, ray.direction * 100.0f, Color.red, 1.0f); // ray.directionì´ ì¹´ë©”ë¼ì™€ ë§ˆìš°ìŠ¤ì˜ ë‹¨ìœ„ë°©í–¥ë²¡í„°

    RaycastHit hit;
    if (Physics.Raycast(ray, out hit, 100.0f))
    {
        Debug.Log($"Raycast Camera @ {hit.transform.gameObject.name}");
    }
}
```
RayëŠ” ë” ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆìŒ
