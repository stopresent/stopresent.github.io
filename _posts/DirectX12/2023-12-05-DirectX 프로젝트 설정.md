---
title: "DirectX12 ê³µë¶€ë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ ì„¤ì •"

categories:
  - DirectX12
tags:
  - DirectX12

author_profile: false

sidebar:
  nav: "docs"

date: 2023-12-05
last_modified_at: 2023-12-05
---

## ğŸ™‡â€â™€ï¸DirectX12 ê³µë¶€ë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ ì„¤ì •


<br>


### ğŸªí”„ë¡œì íŠ¸ ìƒì„±

![ìŠ¤í¬ë¦°ìƒ· 2023-12-05 201248](https://github.com/stopresent/DirectX12-Study/assets/86364202/605435ea-fa63-4bb2-83ea-4ed92e78d3ce)

windows ë°ìŠ¤í¬í†± ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ìƒì„±ì„ í•œë‹¤.  
í˜„ì¬ì˜ ê²½ìš° ì›í•˜ëŠ” í´ë”ì— ìƒì„±ì„í•˜ê³  ì†”ë£¨ì…˜ ì´ë¦„ì€ DirectX12Game, í”„ë¡œì íŠ¸ ì´ë¦„ì€ Clientë¡œ ì§€ì—ˆë‹¤.

![winMainí•¨ìˆ˜](https://github.com/stopresent/DirectX12-Study/assets/86364202/e2412f9e-a210-43ad-b904-fd5f91a55784)

ê¸°ë³¸ì ìœ¼ë¡œ wWinMainì´ mainí•¨ìˆ˜ì™€ ë™ì¼í•˜ë©° ì´ í”„ë¡œì íŠ¸ì—ì„œ ê·¸ë˜ë„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë‚˜ì˜¨ë‹¤.

![windowsì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ë³¸ ì‹¤í–‰ í™”ë©´](https://github.com/stopresent/DirectX12-Study/assets/86364202/8ab78482-6db6-4c3b-9862-2cf3e820c035)

wWinMainì—ì„œ whileë¬¸ì—ì„œ ë¹ ì ¸ë‚˜ê°€ì§€ ì•Šê¸° ë•Œë¬¸ì— í™”ë©´ì´ êº¼ì§€ì§€ ì•Šê³  ê³„ì† ì‹¤í–‰ëœë‹¤.  
ê²Œì„ë„ ì´ì™€ ë§ˆì°¬ê°€ì§€ë¡œ mainí•¨ìˆ˜ì•ˆì— ë¬´í•œ ë£¨í”„ë¥¼ í†µí•´ì„œ ê²Œì„ì´ ëŠê¸°ì§€ ì•Šê³  ì‹¤í–‰ëœë‹¤.  


í˜„ì¬ wWinMainì˜ Whileì„ ì‚´í´ë³´ì.  

![winMainí•¨ìˆ˜ì˜ while](https://github.com/stopresent/DirectX12-Study/assets/86364202/af175b6d-a500-47e9-a858-c0c8e79840c7)

GetMessageëŠ” í´ë¦­ì´ë‚˜ í‚¤ë³´ë“œ ì…ë ¥ ë“± ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œë§Œ ì‹¤í–‰ë˜ëŠ”ë° ê²Œì„ ê°™ì€ ê²½ìš° ì´ë ‡ê²Œ ëŠê¸°ë©´ ì•ˆë˜ê³  ì‹¤ì‹œê°„ìœ¼ë¡œ ê³„ì† ì‹¤í–‰ë˜ì–´ì•¼ í•˜ê¸°ë•Œë¬¸ì— ì´ ë¶€ë¶„ì´ ë³€ê²½ì´ í•„ìš”í•˜ë‹¤.  

ê·¸ë˜ì„œ GetMessageê°€ ì•„ë‹ˆë¼ trueë¡œ ë³€ê²½í•˜ê³  PeekMessageë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.  
ì´ê²ƒì€ `PeekMessage(&msg, nullptr, 0, 0, PM_REMOVE)` ë¡œ ì‚¬ìš©í•˜ëŠ”ë° ì¸ìë“¤ì„ ì„¤ëª…í•´ë³´ìë©´ ì²« ë²ˆì§¸ ì¸ìë¡œ ë©”ì‹œì§€ë¥¼ ë°›ì•„ì¤„ ìˆ˜ê°€ ìˆëŠ”ê±°ê³  ê·¸ ë‹¤ìŒ ì¸ìëŠ” í•¸ë“¤ì„ í†µí•´ì„œ ì–´ë–¤ í•¸ë“¤ ìœˆë„ìš°ì¦ˆë¥¼ ì§€ê¸ˆ ì‚¬ìš©í•˜ëŠ” ê±´ì§€ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ”ë° ì´ë ‡ê²Œ nullptrì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ Threadì™€ ê´€ë ¨ëœ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ë°›ê²Œëœë‹¤.  
ê·¸ ë‹¤ìŒ 0, 0 ì€ í•„í„°ì¸ë° ì´ë ‡ê²Œí•˜ë©´ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ë°›ê²Œëœë‹¤.  
PM_REMOVEëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¼ê°ì„ ë©”ì‹œì§€ íì— ì§‘ì–´ë„£ê³  ê·¸ê²ƒì„ í•˜ë‚˜ì”© êº¼ë‚´ì„œ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë° PM_REMOVEëŠ” íì—ì„œ êº¼ë‚´ì£¼ëŠ” ì˜ë¯¸ì´ë‹¤.  

ê¸°ë³¸ì ìœ¼ë¡œ ë©”ì¸ì€ í•œë²ˆë§Œ ë§Œë“¤ê³  ê±´ë“¤ì§€ ì•Šê¸° ë•Œë¬¸ì— ê¸°ì–µì•ˆí•´ë„ ë˜ëŠ” ë¶€ë¶„ì´ë¼ê³  í•œë‹¤.  
~~ê·¼ë° ì™œ ë£¨í‚¤ìŠ¤ë‹˜ì€ ë‹¤ ì•Œê³ ìˆëŠ”ë°..~~

ê·¸ë¦¬ê³  í”„ë¡œê·¸ë¨ì€ ë‚˜ê°€ê¸° ìœ„í•´ì„œ WM_QUITë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ë˜ê²Œ ëœë‹¤.  

![winMainë³€ê²½ 1](https://github.com/stopresent/DirectX12-Study/assets/86364202/63330847-747b-4a9f-a3b0-e6c1410d5cbd)


ì´ë ‡ê²Œê¹Œì§€ í•˜ê³  í¸í•˜ê²Œ ì‘ì—…í•˜ê¸° ìœ„í•˜ì—¬ pchë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.  
pchì™€ ê´€ë ¨ëœ ê²ƒì€ ë”°ë¡œ ì •ë¦¬í•˜ì˜€ë‹¤.  


pchë¥¼ ë§Œë“¤ê³  ë‚œ ë’¤ì—ëŠ” Game í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.  
![game class](https://github.com/stopresent/DirectX12-Study/assets/86364202/ac1fb46c-f779-4cbb-9ab6-a408f968a5f4)

Game í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆìœ¼ë¯€ë¡œ winMainì— ì ìš©í•œë‹¤.  
![winMain ë³€ê²½ 2](https://github.com/stopresent/DirectX12-Study/assets/86364202/82d75fd8-4a5d-4e13-b907-e4666dea84e6)

ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ ë©”ë‰´ë°”ë¥¼ ì—†ì• ê¸° ìœ„í•˜ì—¬ woex.lpszMenuNameë¥¼ nullptrë¡œ ë³€ê²½í•œë‹¤.  
![ë©”ë‰´ì´ë¦„ ì—†ì• ê¸°](https://github.com/stopresent/DirectX12-Study/assets/86364202/38d87dc0-c6fb-45b5-9f67-82649d84e441)


ë©”ë‰´ë¥¼ ì œì™¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë‚˜ì˜¨ë‹¤.  
![ë©”ë‰´ë¥¼ ëº€ í™”ë©´](https://github.com/stopresent/DirectX12-Study/assets/86364202/41fc3435-e73e-4be8-ac76-10f0a43a1d01)

<br/>

### ğŸªEngine ë§Œë“¤ê¸°

ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•˜ì—¬ Engine ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“ ë‹¤.  

ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ ì†”ë£¨ì…˜ -> ì¶”ê°€ -> ìƒˆ í”„ë¡œì íŠ¸ë¥¼ í•œë‹¤.  
![ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„± 1](https://github.com/stopresent/DirectX12-Study/assets/86364202/db8aa4b1-bd9c-435d-9467-ebcacda018de)

ë‹¤ë¥¸ Windows ì‹¤í–‰ íŒŒì¼ ë‚´ì— íŒ¨í‚¤ì§€í•  ìˆ˜ ìˆëŠ” ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“ ë‹¤.  
![ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„± 2](https://github.com/stopresent/DirectX12-Study/assets/86364202/fb6f2cd6-9c30-45cb-857a-7819a8abee1b)

libíŒŒì¼ì€ ìŠ¤ìŠ¤ë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤.  
ì™œëƒí•˜ë©´ ì‹¤í–‰íŒŒì¼ì¸ exeíŒŒì¼ì„ ë§Œë“¤ì§€ ì•Šê¸° ë–„ë¬¸ì´ë‹¤.  

![ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„± 3](https://github.com/stopresent/DirectX12-Study/assets/86364202/20086e03-583a-4310-89d0-04d15bed9a77)

ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” mainí•¨ìˆ˜ê°€ ë”°ë¡œì—†ê¸° ë•Œë¬¸ì— Engine.cpp íŒŒì¼ë„ í•„ìš”í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‚­ì œí•œë‹¤.  
ê·¸ë¦¬ê³  framework.h ì•ˆì— ë³´ë©´ í•œ ì¤„ë§Œ ìˆê¸° ë•Œë¬¸ì— ë³µì‚¬í•˜ì—¬ pch.hì— ë„£ê³  ì‚­ì œí•œë‹¤.  

ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ê²ƒë“¤ì„ ë”°ë¡œ pchë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œ EnginePch ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë”°ë¡œ ë§Œë“¤ì—ˆë‹¤.  

Engine.hì˜ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ë‹¤.  
ë‹¤ë¥¸ í”„ì ì—ì„œë„ ì‚¬ìš©ë  ìˆ˜ ìˆì„ê±°ê°™ì•„ì„œ ì½”ë”ë¡œ ë„£ì—ˆë‹¤.  
```cpp
#pragma once

// ê°ì¢… include
#include <windows.h>
#include <tchar.h>
#include <memory>
#include <string>
#include <vector>
#include <array>
#include <list>
#include <map>
using namespace std;

#include "d3dx12.h"
#include <d3d12.h>
#include <wrl.h>
#include <d3dcompiler.h>
#include <dxgi.h>
#include <DirectXMath.h>
#include <DirectXPackedVector.h>
#include <DirectXColors.h>
using namespace DirectX;
using namespace DirectX::PackedVector;
using namespace Microsoft::WRL;

// ê°ì¢… lib
#pragma comment(lib, "d3d12")
#pragma comment(lib, "dxgi")
#pragma comment(lib, "dxguid")
#pragma comment(lib, "d3dcompiler")

// ê°ì¢… typedef
using int8		= __int8;
using int16		= __int16;
using int32		= __int32;
using int64		= __int64;
using uint8		= unsigned __int8;
using uint16	= unsigned __int16;
using uint32	= unsigned __int32;
using uint64	= unsigned __int64;
using Vec2		= XMFLOAT2;
using Vec3		= XMFLOAT3;
using Vec4		= XMFLOAT4;
using Matrix	= XMMATRIX;
```

<br/>

### ğŸªíŒŒì¼ ìƒì„± ìœ„ì¹˜ ë³€ê²½

íŒŒì¼ ìƒì„± ìœ„ì¹˜ë¥¼ Outputì´ë¼ëŠ” í´ë”ë‚´ì— ë‹¤ ì§‘ì–´ ë„£ë„ë¡ ë³€ê²½í•œë‹¤.  
ë¨¼ì € Engineì„ ìš°í´ë¦­í•˜ì—¬ ì†ì„±ì— ë“¤ì–´ê°„ë‹¤.  
![íŒŒì¼ ìƒì„± ìœ„ì¹˜ ë³€ê²½ 1](https://github.com/stopresent/DirectX12-Study/assets/86364202/5915ab0f-54f6-4d8b-9bc9-7cf045d3e6e2)

ê·¸ ë’¤ì— êµ¬ì„±ì†ì„±ì˜ ì¼ë°˜ì—ì„œ ì¶œë ¥ ë””ë ‰í† ë¦¬ë¥¼ $(SolutionDir)Output\ë¡œ ë³€ê²½í•œë‹¤.  
![íŒŒì¼ ìƒì„± ìœ„ì¹˜ ë³€ê²½ 2](https://github.com/stopresent/DirectX12-Study/assets/86364202/53792db5-dde8-49bf-8515-7ac2834d45d4)

<br/>

### ğŸªì—”ì§„ì˜ ê¸°ëŠ¥ì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸°

í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì—”ì§„ê³¼ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ ëŒì–´ë‹¤ì“°ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì.  
í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì—”ì§„ì˜ í—¤ë”íŒŒì¼ì´ ìˆëŠ” ê²½ë¡œì™€ libíŒŒì¼ì˜ ê²½ë¡œë¥¼ ì•Œë ¤ì¤˜ì•¼í•œë‹¤.  
ì§€ê¸ˆì€ Engineí´ë”ì— ê°€ë©´ í—¤ë”íŒŒì¼ì´ ìˆê³ , Output í´ë”ì—ê°€ë©´ lib íŒŒì¼ì´ ìˆë‹¤.  
ê·¸ê²ƒì„ ì•Œë ¤ì£¼ë©´ ëœë‹¤.  

í´ë¼ì´ì–¸íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ìš°í´ë¦­í•˜ì—¬ ì†ì„±ì— ë“¤ì–´ê°€ì„œ êµ¬ì„±ì†ì„± -> VC++ ë””ë ‰í„°ë¦¬ì— ë“¤ì–´ê°„ë‹¤.  
![ì—”ì§„ ì‚¬ìš©í•˜ê¸° 1](https://github.com/stopresent/DirectX12-Study/assets/86364202/65429b2c-bfa8-41f6-94a4-78a33d151433)

í¬í•¨ ë””ë ‰í„°ë¦¬ëŠ” í—¤ë”íŒŒì¼ì´ ìˆëŠ” ê²½ë¡œë¥¼, ë¼ì´ë¸ŒëŸ¬ë¦¬ ë””ë ‰í„°ë¦¬ëŠ” lib íŒŒì¼ì´ ìˆëŠ” ê²½ë¡œë¡œ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.  
ê²½ë¡œëŠ” ìƒëŒ€ ê²½ë¡œë¡œ ì§€ì •í•˜ëŠ”ê²Œ ì¢‹ë‹¤.  

![ì—”ì§„ ì‚¬ìš©í•˜ê¸° 2](https://github.com/stopresent/DirectX12-Study/assets/86364202/e83c8ac7-fd65-4193-bdc0-d19ee982995a)

ì´ë ‡ê²Œ í¬í•¨ë””ë ‰í„°ë¦¬ì—ëŠ” `$(SolutionDir)Engine\` ì„ ë„£ì–´ì¤€ë‹¤.  

![ì—”ì§„ ì‚¬ìš©í•˜ê¸° 3](https://github.com/stopresent/DirectX12-Study/assets/86364202/5dcbf6b7-af90-43bc-b185-1782677bb1a8)

ë¼ì´ë¸ŒëŸ¬ë¦¬ ë””ë ‰í„°ë¦¬ì—ëŠ” `$(SolutionDir)Output\` ì„ ë„£ì–´ì¤€ë‹¤.  


ì´ë ‡ê²Œ í•˜ê³  Engineì— ìˆëŠ”ê²ƒì„ í´ë¼ì—ì„œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ ì•„ë˜ì™€ê°™ì€ ì—ëŸ¬ê°€ ëœ¬ë‹¤.  
![ì—”ì§„ ì‚¬ìš©í•˜ê¸° 4](https://github.com/stopresent/DirectX12-Study/assets/86364202/cf19915e-4c1f-46d7-bb84-50e392526faa)

ì´ ì—ëŸ¬ëŠ” ë§ì»¤ì—ëŸ¬ì¸ë° ì´ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ pch.h ì—ì„œ `#pragma comment(lib, "Engine.lib)` ë¥¼ ì¶”ê°€í•œë‹¤.  
pragmaëŠ” ì „ì²˜ë¦¬ ë‹¨ê³„ì—ì„œ ì¼ì–´ë‚œë‹¤.  

![ì—”ì§„ ì‚¬ìš©í•˜ê¸° 5](https://github.com/stopresent/DirectX12-Study/assets/86364202/a45ce400-95b4-40a0-a085-958e65ab867a)

ì´ë ‡ê²Œ í•˜ë©´ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•Šê³  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  


í”„ë¡œì íŠ¸ ì„¸íŒ… ë