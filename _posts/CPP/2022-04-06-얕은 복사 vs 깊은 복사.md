---
title: "C++ Rookiss Part1 C++ í”„ë¡œê·¸ë˜ë° ì…ë¬¸ : ì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬"

categories:
  - CPP
tags:
  - CPP

author_profile: false

sidebar:
  nav: "docs"

date: 2022-04-06
last_modified_at: 2022-04-06
---


## ğŸ™‡â€â™€ï¸ì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬


### ğŸªë³µìŠµ


```cpp
Pet* pet = new Pet();

Knight k1; // ê¸°ë³¸ ìƒì„±ì
k1._hp = 200;
k1._pet = pet;

Knight k2 = k1; // ë³µì‚¬ ìƒì„±ì
//Knight k3(k1);

Knight k3; // ê¸°ë³¸ ìƒì„±ì
k3 = k1; // ë³µì‚¬ ëŒ€ì… ì—°ì‚°ì
```


```cpp
class Pet
{
public:
	Pet()
	{
		cout << "Pet()" << endl;
	}

	~Pet()
	{
		cout << "~Pet()" << endl;
	}

	Pet(const Pet& pet)
	{
		cout << "Pet(const Pet&)" << endl;
	}

};
```


```cpp
class Knight
{
public:
	Knight()
	{
		_pet = new Pet();
	}

	Knight(const Knight& knight)
	{
		_hp = knight._hp;
		_pet = new Pet(*(knight._pet)); // ê¹Šì€ ë³µì‚¬
	}

	Knight& operator=(const Knight& knight)
	{
		_hp = knight._hp;
		_pet = new Pet(*(knight._pet)); // ê¹Šì€ ë³µì‚¬
		return *this;
	}

	~Knight()
	{
		delete _pet;
	}

public:
	int _hp = 100;
	Pet* _pet;
};
```



### ğŸªì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬



* ë³µì‚¬ ìƒì„±ì + ë³µì‚¬ ëŒ€ì… ì—°ì‚°ì
     - ë‘˜ ë‹¤ ì•ˆ ë§Œë“¤ì–´ì£¼ë©´ ì»´íŒŒì¼ëŸ¬ 'ì•”ì‹œì ìœ¼ë¡œ' ë§Œë“¤ì–´ì¤€ë‹¤

- ì¤‘ê°„ ê²°ë¡  - ì»´íŒŒì¼ëŸ¬ê°€ ì•Œì•„ì„œ ì˜ ë§Œë“¤ì–´ì¤€ë‹¤?

* ì–´ë–¤ í´ë˜ìŠ¤ì—ì„œ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë“¤ê³  ìˆì„ ë•Œì—ëŠ” ë³µì‚¬ê°€ ì•„ë‹ˆë¼ í¬ì¸í„° í˜¹ì€ ì°¸ì¡° íƒ€ì…ìœ¼ë¡œ ë“¤ê³ ìˆëŠ” ê²ƒì´ ì¢‹ë‹¤

<br>

**[ ì–•ì€ ë³µì‚¬ Shallow Copy ]**
* ë©¤ë²„ ë°ì´í„°ë¥¼ ë¹„íŠ¸ì—´ ë‹¨ìœ„ë¡œ 'ë˜‘ê°™ì´' ë³µì‚¬ (ë©”ëª¨ë¦¬ ì˜ì—­ ê°’ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬)
* í¬ì¸í„°ëŠ” ì£¼ì†Œê°’ ë°”êµ¬ë‹ˆ -> ì£¼ì†Œê°’ì„ ë˜‘ê°™ì´ ë³µì‚¬ -> ë™ì¼í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìƒíƒœê°€ ë¨

    <br>Stack : Knight1 [ hp 0x1000 ] -> Heap 0x1000 Pet [  ]
    <br>Stack : Knight2 [ hp 0x1000 ] -> Heap 0x1000 Pet [  ]
    <br>Stack : Knight3 [ hp 0x1000 ] -> Heap 0x1000 Pet [  ]

<br>

**[ ê¹Šì€ ë³µì‚¬ Deep Copy ]**
* ë©¤ë²„ ë°ì´í„°ê°€ ì°¸ì¡°(ì£¼ì†Œ) ê°’ì´ë¼ë©´, ë°ì´í„°ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì¤€ë‹¤ (ì›ë³¸ ê°ì²´ê°€ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒê¹Œì§€ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ë³µì‚¬)
* í¬ì¸í„°ëŠ” ì£¼ì†Œê°’ ë°”êµ¬ë‹ˆ -> ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„± -> ìƒì´í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìƒíƒœê°€ ë¨

    <br>Stack : Knight1 [ hp 0x1000 ] -> Heap 0x1000 Pet [  ]
    <br>Stack : Knight2 [ hp 0x2000 ] -> Heap 0x2000 Pet [  ]
    <br>Stack : Knight3 [ hp 0x3000 ] -> Heap 0x3000 Pet [  ]


### ğŸªì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬

<br>

**ì‹¤í—˜**
- ì•”ì‹œì  ë³µì‚¬ ìƒì„±ì Steps
    1. ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë³µì‚¬ ìƒì„±ì í˜¸ì¶œ
    2. ë©¤ë²„ í´ë˜ìŠ¤ì˜ ë³µì‚¬ ìƒì„±ì í˜¸ì¶œ
    3. ë©¤ë²„ê°€ ê¸°ë³¸ íƒ•ë¦½ì¼ ê²½ìš° ë©”ëª¨ë¦¬ ë³µì‚¬ (ì–•ì€ ë³µì‚¬ Shallow Copy)
- ëª…ì‹œì  ë³µì‚¬ ìƒì„±ì Steps
    1. ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ
    2. ë©¤ë²„ í´ë˜ìŠ¤ì˜ ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ



### ğŸªì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬


