---
title: "BOJ 15683. ê°ì‹œ"

categories:
  - BaekJun
tags:
  - BaekJun

author_profile: false

sidebar:
  nav: "docs"

date: 2024-02-10
last_modified_at: 2024-02-10
---

# ğŸ™‡â€â™€ï¸[Gold IV] ê°ì‹œ - 15683 

[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/15683) 

### ì„±ëŠ¥ ìš”ì•½

ë©”ëª¨ë¦¬: 2024 KB, ì‹œê°„: 24 ms

### ë¶„ë¥˜

ë°±íŠ¸ë˜í‚¹, ë¸Œë£¨íŠ¸í¬ìŠ¤ ì•Œê³ ë¦¬ì¦˜, êµ¬í˜„, ì‹œë®¬ë ˆì´ì…˜

### ì œì¶œ ì¼ì

2024ë…„ 2ì›” 9ì¼ 23:08:06

### ë¬¸ì œ ì„¤ëª…

<p>ìŠ¤íƒ€íŠ¸ë§í¬ì˜ ì‚¬ë¬´ì‹¤ì€ 1Ã—1í¬ê¸°ì˜ ì •ì‚¬ê°í˜•ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆëŠ” NÃ—M í¬ê¸°ì˜ ì§ì‚¬ê°í˜•ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤. ì‚¬ë¬´ì‹¤ì—ëŠ” ì´ Kê°œì˜ CCTVê°€ ì„¤ì¹˜ë˜ì–´ì ¸ ìˆëŠ”ë°, CCTVëŠ” 5ê°€ì§€ ì¢…ë¥˜ê°€ ìˆë‹¤. ê° CCTVê°€ ê°ì‹œí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<table class="table table table-bordered" style="width: 100%;">
	<tbody>
		<tr>
			<td style="width: 20%; text-align: center; vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/1.png" style="width: 113px; height: 70px;"></td>
			<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/2.png" style="width: 156px; height: 70px;"></td>
			<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/3.png" style="width: 100px; height: 100px;"></td>
			<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/4.png" style="width: 138px; height: 100px;"></td>
			<td style="width: 20%; text-align: center;vertical-align: middle;"><img alt="" src="https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15683/5.png" style="width: 149px; height: 150px;"></td>
		</tr>
		<tr>
			<td style="width: 20%; text-align: center;">1ë²ˆ</td>
			<td style="width: 20%; text-align: center;">2ë²ˆ</td>
			<td style="width: 20%; text-align: center;">3ë²ˆ</td>
			<td style="width: 20%; text-align: center;">4ë²ˆ</td>
			<td style="width: 20%; text-align: center;">5ë²ˆ</td>
		</tr>
	</tbody>
</table>

<p>1ë²ˆ CCTVëŠ” í•œ ìª½ ë°©í–¥ë§Œ ê°ì‹œí•  ìˆ˜ ìˆë‹¤. 2ë²ˆê³¼ 3ë²ˆì€ ë‘ ë°©í–¥ì„ ê°ì‹œí•  ìˆ˜ ìˆëŠ”ë°, 2ë²ˆì€ ê°ì‹œí•˜ëŠ” ë°©í–¥ì´ ì„œë¡œ ë°˜ëŒ€ë°©í–¥ì´ì–´ì•¼ í•˜ê³ , 3ë²ˆì€ ì§ê° ë°©í–¥ì´ì–´ì•¼ í•œë‹¤. 4ë²ˆì€ ì„¸ ë°©í–¥, 5ë²ˆì€ ë„¤ ë°©í–¥ì„ ê°ì‹œí•  ìˆ˜ ìˆë‹¤.</p>

<p>CCTVëŠ” ê°ì‹œí•  ìˆ˜ ìˆëŠ” ë°©í–¥ì— ìˆëŠ” ì¹¸ ì „ì²´ë¥¼ ê°ì‹œí•  ìˆ˜ ìˆë‹¤. ì‚¬ë¬´ì‹¤ì—ëŠ” ë²½ì´ ìˆëŠ”ë°, CCTVëŠ” ë²½ì„ í†µê³¼í•  ìˆ˜ ì—†ë‹¤. CCTVê°€ ê°ì‹œí•  ìˆ˜ ì—†ëŠ” ì˜ì—­ì€ ì‚¬ê°ì§€ëŒ€ë¼ê³  í•œë‹¤.</p>

<p>CCTVëŠ” íšŒì „ì‹œí‚¬ ìˆ˜ ìˆëŠ”ë°, íšŒì „ì€ í•­ìƒ 90ë„ ë°©í–¥ìœ¼ë¡œ í•´ì•¼ í•˜ë©°, ê°ì‹œí•˜ë ¤ê³  í•˜ëŠ” ë°©í–¥ì´ ê°€ë¡œ ë˜ëŠ” ì„¸ë¡œ ë°©í–¥ì´ì–´ì•¼ í•œë‹¤.</p>

<pre>0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 0 6 0
0 0 0 0 0 0</pre>

<p>ì§€ë„ì—ì„œ 0ì€ ë¹ˆ ì¹¸, 6ì€ ë²½, 1~5ëŠ” CCTVì˜ ë²ˆí˜¸ì´ë‹¤. ìœ„ì˜ ì˜ˆì‹œì—ì„œ 1ë²ˆì˜ ë°©í–¥ì— ë”°ë¼ ê°ì‹œí•  ìˆ˜ ìˆëŠ” ì˜ì—­ì„ '<code>#</code>'ë¡œ ë‚˜íƒ€ë‚´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p>

<table class="table table table-bordered" style="width: 100%;">
	<tbody>
		<tr>
			<td style="width: 25%; text-align: center;">
			<pre>0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 # 6 0
0 0 0 0 0 0</pre>
			</td>
			<td style="width: 25%; text-align: center;">
			<pre>0 0 0 0 0 0
0 0 0 0 0 0
# # 1 0 6 0
0 0 0 0 0 0</pre>
			</td>
			<td style="width: 25%; text-align: center;">
			<pre>0 0 # 0 0 0
0 0 # 0 0 0
0 0 1 0 6 0
0 0 0 0 0 0</pre>
			</td>
			<td style="width: 25%; text-align: center;">
			<pre>0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 0 6 0
0 0 # 0 0 0</pre>
			</td>
		</tr>
		<tr>
			<td style="width: 25%; text-align: center;">â†’</td>
			<td style="width: 25%; text-align: center;">â†</td>
			<td style="width: 25%; text-align: center;">â†‘</td>
			<td style="width: 25%; text-align: center;">â†“</td>
		</tr>
	</tbody>
</table>

<p>CCTVëŠ” ë²½ì„ í†µê³¼í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, 1ë²ˆì´ â†’ ë°©í–¥ì„ ê°ì‹œí•˜ê³  ìˆì„ ë•ŒëŠ” 6ì˜ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ì¹¸ì„ ê°ì‹œí•  ìˆ˜ ì—†ë‹¤.</p>

<pre>0 0 0 0 0 0
0 2 0 0 0 0
0 0 0 0 6 0
0 6 0 0 2 0
0 0 0 0 0 0
0 0 0 0 0 5</pre>

<p>ìœ„ì˜ ì˜ˆì‹œì—ì„œ ê°ì‹œí•  ìˆ˜ ìˆëŠ” ë°©í–¥ì„ ì•Œì•„ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p>

<table class="table table table-bordered" style="width: 100%;">
	<tbody>
		<tr>
			<td style="width: 25%; text-align: center;">
			<pre>0 0 0 0 0 #
# 2 # # # #
0 0 0 0 6 #
0 6 # # 2 #
0 0 0 0 0 #
# # # # # 5</pre>
			</td>
			<td style="width: 25%; text-align: center;">
			<pre>0 0 0 0 0 #
# 2 # # # #
0 0 0 0 6 #
0 6 0 0 2 #
0 0 0 0 # #
# # # # # 5</pre>
			</td>
			<td style="width: 25%; text-align: center;">
			<pre>0 # 0 0 0 #
0 2 0 0 0 #
0 # 0 0 6 #
0 6 # # 2 #
0 0 0 0 0 #
# # # # # 5</pre>
			</td>
			<td style="width: 25%; text-align: center;">
			<pre>0 # 0 0 0 #
0 2 0 0 0 #
0 # 0 0 6 #
0 6 0 0 2 #
0 0 0 0 # #
# # # # # 5</pre>
			</td>
		</tr>
		<tr>
			<td style="width: 25%; text-align: center;">ì™¼ìª½ ìƒë‹¨ 2: â†”, ì˜¤ë¥¸ìª½ í•˜ë‹¨ 2: â†”</td>
			<td style="width: 25%; text-align: center;">ì™¼ìª½ ìƒë‹¨ 2: â†”, ì˜¤ë¥¸ìª½ í•˜ë‹¨ 2: â†•</td>
			<td style="width: 25%; text-align: center;">ì™¼ìª½ ìƒë‹¨ 2: â†•, ì˜¤ë¥¸ìª½ í•˜ë‹¨ 2: â†”</td>
			<td style="width: 25%; text-align: center;">ì™¼ìª½ ìƒë‹¨ 2: â†•, ì˜¤ë¥¸ìª½ í•˜ë‹¨ 2: â†•</td>
		</tr>
	</tbody>
</table>

<p>CCTVëŠ” CCTVë¥¼ í†µê³¼í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ ì˜ˆì‹œë¥¼ ë³´ì.</p>

<pre>0 0 2 0 3
0 6 0 0 0
0 0 6 6 0
0 0 0 0 0
</pre>

<p>ìœ„ì™€ ê°™ì€ ê²½ìš°ì— 2ì˜ ë°©í–¥ì´ â†• 3ì˜ ë°©í–¥ì´ â†ì™€ â†“ì¸ ê²½ìš° ê°ì‹œë°›ëŠ” ì˜ì—­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<pre># # 2 # 3
0 6 # 0 #
0 0 6 6 #
0 0 0 0 #
</pre>

<p>ì‚¬ë¬´ì‹¤ì˜ í¬ê¸°ì™€ ìƒíƒœ, ê·¸ë¦¬ê³  CCTVì˜ ì •ë³´ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, CCTVì˜ ë°©í–¥ì„ ì ì ˆíˆ ì •í•´ì„œ, ì‚¬ê° ì§€ëŒ€ì˜ ìµœì†Œ í¬ê¸°ë¥¼ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤.</p>

### ì…ë ¥ 

 <p>ì²«ì§¸ ì¤„ì— ì‚¬ë¬´ì‹¤ì˜ ì„¸ë¡œ í¬ê¸° Nê³¼ ê°€ë¡œ í¬ê¸° Mì´ ì£¼ì–´ì§„ë‹¤. (1 â‰¤ N, M â‰¤ 8)</p>

<p>ë‘˜ì§¸ ì¤„ë¶€í„° Nê°œì˜ ì¤„ì—ëŠ” ì‚¬ë¬´ì‹¤ ê° ì¹¸ì˜ ì •ë³´ê°€ ì£¼ì–´ì§„ë‹¤. 0ì€ ë¹ˆ ì¹¸, 6ì€ ë²½, 1~5ëŠ” CCTVë¥¼ ë‚˜íƒ€ë‚´ê³ , ë¬¸ì œì—ì„œ ì„¤ëª…í•œ CCTVì˜ ì¢…ë¥˜ì´ë‹¤. </p>

<p>CCTVì˜ ìµœëŒ€ ê°œìˆ˜ëŠ” 8ê°œë¥¼ ë„˜ì§€ ì•ŠëŠ”ë‹¤.</p>

### ì¶œë ¥ 

 <p>ì²«ì§¸ ì¤„ì— ì‚¬ê° ì§€ëŒ€ì˜ ìµœì†Œ í¬ê¸°ë¥¼ ì¶œë ¥í•œë‹¤.</p>

## ğŸš€í’€ì´

ë¸Œë£¨íŠ¸í¬ìŠ¤ë¡œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ íƒìƒ‰í•´ì„œ í’€ì—ˆë‹¤.  

```cpp
enum Dir
{
	UP,		// 0
	RIGHT,	// 1
	DOWN,	// 2
	LEFT,	// 3
};

int n, m, cctvCount, ch[20], res = 123456789;
vector<vector<int>> board;
vector<vector<int>> visited;
vector<pair<int, int>> cctvs;

int dy[] = { -1, 0, 1, 0 };
int dx[] = { 0, 1, 0, -1 };
```

ì´ë ‡ê²Œ ì „ì—­ ë³€ìˆ˜ë¥¼ ì¡ì•˜ê³ , cctvë§ˆë‹¤ ê°ì‹œí•˜ëŠ” ë²”ìœ„ê°€ ë‹¤ë¥´ë¯€ë¡œ ê°ê°ì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤¬ë‹¤.  

```cpp
void CCTV1(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV2(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	dir = (dir + 2) % 4;
	y = curY;
	x = curX;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV3(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	y = curY;
	x = curX;
	dir = (dir + 1) % 4;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV4(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	y = curY;
	x = curX;
	dir = (dir + 1) % 4;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	y = curY;
	x = curX;
	dir = (dir + 2) % 4;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV5(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	for (int i = 1; i <= 4; ++i)
	{
		while (true)
		{
			int ny = y + dy[dir];
			int nx = x + dx[dir];

			if (ny < 1 || nx < 1 || ny > n || nx > m)
				break;
			if (board[ny][nx] == 6)
				break;

			y = ny;
			x = nx;

			visited[ny][nx] = 1;
		}

		dir = (dir + i) % 4;
		y = curY;
		x = curX;
	}
}
```

ë¬¸ì œì˜ ì¡°ê±´ëŒ€ë¡œ ê°ì‹œë¥¼ í•˜ê³  ë°©í–¥ì„ ì„¤ì •í•˜ë©´ ê·¸ ë°©í–¥ì„ ê¸°ì¤€ìœ¼ë¡œ ê°ì§€í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.  

ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ì™€ ê²°ê³¼ í™•ì¸ì„ ìœ„í•´ visitedë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜ë„ ë§Œë“¤ì—ˆë‹¤.  

```cpp
void visitedClear()
{
	for (int i = 1; i <= n; ++i)
	{
		for (int j = 1; j <= m; ++j)
		{
			visited[i][j] = 0;
		}
	}
}
```


```cpp
int checkResult()
{
	int res = 0;

	for (int i = 1; i <= n; ++i)
	{
		for (int j = 1; j <= m; ++j)
		{
			if (board[i][j] == 1 || board[i][j] == 2 || board[i][j] == 3 || board[i][j] == 4 || board[i][j] == 5 || board[i][j] == 6)
				continue;

			if (visited[i][j] == 0 )
				res++;
		}
	}

	return res;
}
```

ëª¨ë“  ìƒí™©ì„ íƒìƒ‰í•˜ê¸° ìœ„í•´ì„œ ì¤‘ë³µ ê°€ëŠ¥í•œ ìˆœì—´ì„ ë§Œë“¤ì—ˆë‹¤.  

DFSë¼ë¥¸ ì´ë¦„ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤.  

```cpp
void DFS(int s, int L)
{
	if (L == cctvCount)
	{
		for (int i = 0; i < L; ++i)
		{
			// ch[i] ê°€ dir
			// iëŠ” cctvì¸ë±ìŠ¤

			if (board[cctvs[i].first][cctvs[i].second] == 1)
			{
				CCTV1(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 2)
			{
				CCTV2(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 3)
			{
				CCTV3(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 4)
			{
				CCTV4(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 5)
			{
				CCTV5(cctvs[i].first, cctvs[i].second, ch[i]);
			}
		}

		res = min(res, checkResult());

		//printVisited();

		visitedClear();

		//cout << ch[i] << " ";
		//cout << endl;
	}
	else
	{
		for (int i = 0; i < 4; ++i)
		{
			ch[L] = i;
			DFS(i + 1, L + 1);
		}
	}
}
```

ìœ„ì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ìµœì¢…ì ìœ¼ë¡œ solveí•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.  

```cpp
void solve()
{
	cin >> n >> m;
	board = vector<vector<int>>(n + 1, vector<int>(m + 1));
	visited = vector<vector<int>>(n + 1, vector<int>(m + 1));

	for (int i = 1; i <= n; ++i)
	{
		for (int j = 1; j <= m; ++j)
		{
			cin >> board[i][j];
			if (board[i][j] >= 1 && board[i][j] <= 5)
				cctvs.push_back({ i, j });
		}
	}

	cctvCount = cctvs.size();

	DFS(0, 0);

	cout << res;
	// cctvê°€ 3ê°œ
	// ê²½ìš°ì˜ ìˆ˜
	// 0 0 0
	// 0 0 1
	// 0 0 2
	// 0 0 3
	// 0 1 0
	// 0 1 1
	// 0 1 2
	// 0 1 3
	// 0 2 0
	// ...

	// 4 * 4 * 4
	// 64
	
}
```

ê³¨ë“œ4 ë¬¸ì œì˜€ëŠ”ë° ê°„ë‹¨í•œ ë°©ë²•ì„ ì°¾ìœ¼ë ¤ê³  ì‹œê°„ì„ ë§ì´ ì¼ë‹¤.  

ê²°êµ­ì—” ë¬´ì‹í•˜ê²Œ í‘¸ëŠ” ë°©ì‹ìœ¼ë¡œ í•˜ë‚˜í•˜ë‚˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ í’€ì—ˆë‹¤.  

ë¬¸ì œ ì œì¶œì—ì„œëŠ” í•œë²ˆë„ í‹€ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ë§ì¶°ì„œ ì¢‹ì•˜ë‹¤.  

![ë¬¸ì œ í•´ê²°](https://github.com/stopresent/BOJ/assets/86364202/95ba12cc-bb41-4793-9cf5-60962f3aa37b)


## ğŸš€ì „ì²´ ì½”ë“œ

```cpp
#define _CRT_SECURE_NO_WARNINGS

#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include<iostream>
#include <fstream>
#include <vector>
#include <algorithm>
#include <math.h>

using namespace std;

void CCTV1(int y, int x, int dir);
void CCTV2(int y, int x, int dir);
void CCTV3(int y, int x, int dir);
void CCTV4(int y, int x, int dir);
void CCTV5(int y, int x, int dir);
void visitedClear();
int checkResult();
void solve();

// 1ë²ˆ : í•œìª½ ë°©í–¥ë§Œ ì²´í¬
// 2ë²ˆ : ì •ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì²´í¬ (í•œ ë¼ì¸ ì²´í¬)
// 3ë²ˆ : ì§ê° ë°©í–¥ìœ¼ë¡œ ì²´í¬
// 4ë²ˆ : í•œ ë°©í–¥ìœ¼ë¡œ ì œì™¸í•˜ê³  ì²´í¬
// 5ë²ˆ : ëª¨ë“  ë°©í–¥ ì²´í¬

// cctvëŠ” ìµœëŒ€ 8ê°œì´ë‹¤.
// í•˜ë‚˜ì˜ cctvëŠ” ìµœëŒ€ 4ë²ˆ ê²½ìš°ì˜ ìˆ˜ê°€ ì¡´ì¬í•œë‹¤. -> ë¸Œë£¨íŠ¸í¬ìŠ¤ë¡œ í•´ë„ ë ê±°ê°™ë‹¤.

// ë²ˆí˜¸ë§ˆë‹¤ ì²´í¬í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•˜ë‹¤.

enum Dir
{
	UP,		// 0
	RIGHT,	// 1
	DOWN,	// 2
	LEFT,	// 3
};

int n, m, cctvCount, ch[20], res = 123456789;
vector<vector<int>> board;
vector<vector<int>> visited;
vector<pair<int, int>> cctvs;

int dy[] = { -1, 0, 1, 0 };
int dx[] = { 0, 1, 0, -1 };

void CCTV1(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV2(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	dir = (dir + 2) % 4;
	y = curY;
	x = curX;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV3(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	y = curY;
	x = curX;
	dir = (dir + 1) % 4;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV4(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	y = curY;
	x = curX;
	dir = (dir + 1) % 4;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}

	y = curY;
	x = curX;
	dir = (dir + 2) % 4;
	while (true)
	{
		int ny = y + dy[dir];
		int nx = x + dx[dir];

		if (ny < 1 || nx < 1 || ny > n || nx > m)
			break;
		if (board[ny][nx] == 6)
			break;

		y = ny;
		x = nx;

		visited[ny][nx] = 1;
	}
}

void CCTV5(int y, int x, int dir)
{
	int curY = y;
	int curX = x;
	for (int i = 1; i <= 4; ++i)
	{
		while (true)
		{
			int ny = y + dy[dir];
			int nx = x + dx[dir];

			if (ny < 1 || nx < 1 || ny > n || nx > m)
				break;
			if (board[ny][nx] == 6)
				break;

			y = ny;
			x = nx;

			visited[ny][nx] = 1;
		}

		dir = (dir + i) % 4;
		y = curY;
		x = curX;
	}
}

void visitedClear()
{
	for (int i = 1; i <= n; ++i)
	{
		for (int j = 1; j <= m; ++j)
		{
			visited[i][j] = 0;
		}
	}
}

int checkResult()
{
	int res = 0;

	for (int i = 1; i <= n; ++i)
	{
		for (int j = 1; j <= m; ++j)
		{
			if (board[i][j] == 1 || board[i][j] == 2 || board[i][j] == 3 || board[i][j] == 4 || board[i][j] == 5 || board[i][j] == 6)
				continue;

			if (visited[i][j] == 0 )
				res++;
		}
	}

	return res;
}

void printVisited()
{
	for (int i = 1; i <= n; ++i)
	{
		for (int j = 1; j <= m; ++j)
		{
			cout << visited[i][j] << " ";
		}
		cout << endl;
	}

	cout << endl;
}

void DFS(int s, int L)
{
	if (L == cctvCount)
	{
		for (int i = 0; i < L; ++i)
		{
			// ch[i] ê°€ dir
			// iëŠ” cctvì¸ë±ìŠ¤

			if (board[cctvs[i].first][cctvs[i].second] == 1)
			{
				CCTV1(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 2)
			{
				CCTV2(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 3)
			{
				CCTV3(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 4)
			{
				CCTV4(cctvs[i].first, cctvs[i].second, ch[i]);
			}
			else if (board[cctvs[i].first][cctvs[i].second] == 5)
			{
				CCTV5(cctvs[i].first, cctvs[i].second, ch[i]);
			}
		}

		res = min(res, checkResult());

		//printVisited();

		visitedClear();

		//cout << ch[i] << " ";
		//cout << endl;
	}
	else
	{
		for (int i = 0; i < 4; ++i)
		{
			ch[L] = i;
			DFS(i + 1, L + 1);
		}
	}
}

void solve()
{
	cin >> n >> m;
	board = vector<vector<int>>(n + 1, vector<int>(m + 1));
	visited = vector<vector<int>>(n + 1, vector<int>(m + 1));

	for (int i = 1; i <= n; ++i)
	{
		for (int j = 1; j <= m; ++j)
		{
			cin >> board[i][j];
			if (board[i][j] >= 1 && board[i][j] <= 5)
				cctvs.push_back({ i, j });
		}
	}

	cctvCount = cctvs.size();

	DFS(0, 0);

	cout << res;
	// cctvê°€ 3ê°œ
	// ê²½ìš°ì˜ ìˆ˜
	// 0 0 0
	// 0 0 1
	// 0 0 2
	// 0 0 3
	// 0 1 0
	// 0 1 1
	// 0 1 2
	// 0 1 3
	// 0 2 0
	// ...

	// 4 * 4 * 4
	// 64
	
}

int main()
{
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	cout.tie(NULL);
	freopen("input.txt", "rt", stdin);

	solve();

	return 0;
}
```